# โ ุชู ุฅุถุงูุฉ Auto-Refresh ูุตูุญุฉ Agents

## ๐ **ุงูููุฒุฉ:**

ุชู ุฅุถุงูุฉ **Auto-refresh** ุชููุงุฆู ูู **60 ุซุงููุฉ** ูุตูุญุฉ ุฅุฏุงุฑุฉ ุงูููุธููู.

---

## ๐ **ุงููููุฒุงุช:**

### **1. Auto-refresh ูู 60 ุซุงููุฉ**
- ุงูุตูุญุฉ ุชุชุญุฏุซ ุชููุงุฆูุงู ูู ุฏูููุฉ
- ูุนุฑุถ ุงูุนุฏ ุงูุชูุงุฒูู (60s, 59s, 58s, ...)

### **2. ูุคุดุฑ ูุฑุฆู (Visual Indicator)**
- **ุงููููุน:** ุฃุนูู ูุณุงุฑ ุงูุตูุญุฉ
- **ุงูููู:** 
  - ๐ข ุฃุฎุถุฑ = Auto-refresh ููุนูู
  - โซ ุฑูุงุฏู = Auto-refresh ูุนุทูู

### **3. ุฒุฑ ุงูุชุญูู (ON/OFF)**
- ูููู ุชูุนูู/ุชุนุทูู Auto-refresh ุจุถุบุทุฉ ูุงุญุฏุฉ
- ุงูุฅุนุฏุงุฏ ูุณุชูุฑ ุทูู ุฌูุณุฉ ุงูุชุตูุญ

### **4. ุงูุนุฏ ุงูุชูุงุฒูู**
- ูุนุฑุถ ุงูููุช ุงููุชุจูู ููุชุญุฏูุซ ุงูุชุงูู
- ูุซุงู: "Auto-refresh: ON (45s)"

---

## ๐จ **ุงูุดูู:**

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ๐ Auto-refresh: ON (60s) [OFF] โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ุนูุฏ ุงูุชุนุทูู:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ๐ Auto-refresh: OFF      [ON]  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ **ููููุฉ ุงูุงุณุชุฎุฏุงู:**

### **1. ุงูุชุญ ุตูุญุฉ Agents:**
```
http://127.0.0.1:8888/admin/agents/
```

### **2. ุดุงูุฏ ุงููุคุดุฑ:**
- ุณูุธูุฑ ูู ุฃุนูู ูุณุงุฑ ุงูุตูุญุฉ
- ุงูุนุฏ ุงูุชูุงุฒูู ูุจุฏุฃ ูู 60 ุซุงููุฉ

### **3. ููุชุนุทูู:**
- ุงุถุบุท ุนูู ุฒุฑ **"OFF"**
- ุงููุคุดุฑ ุณูุชุญูู ูููู ุงูุฑูุงุฏู
- Auto-refresh ุณูุชููู

### **4. ููุชูุนูู ูุฑุฉ ุฃุฎุฑู:**
- ุงุถุบุท ุนูู ุฒุฑ **"ON"**
- ุงููุคุดุฑ ุณูุชุญูู ูููู ุงูุฃุฎุถุฑ
- ุงูุนุฏ ุงูุชูุงุฒูู ูุจุฏุฃ ูู ุฌุฏูุฏ

---

## ๐ก **ุงูููุงุฆุฏ:**

1. โ **ุชุญุฏูุซ ุชููุงุฆู** ููุจูุงูุงุช ุจุฏูู ุชุฏุฎู ูุฏูู
2. โ **ูุฑุงูุจุฉ ูุจุงุดุฑุฉ** ูุญุงูุฉ ุงูููุธููู (Online/Offline)
3. โ **ุชุญุฏูุซ ููุฑู** ูุนุฏุฏ ุงูุชุฐุงูุฑ ุงููุดุทุฉ
4. โ **ุณูููุฉ ุงูุชุญูู** - ูููู ุฅููุงูู ุนูุฏ ุงูุญุงุฌุฉ

---

## ๐ง **ุงูุชูุงุตูู ุงูุชูููุฉ:**

### **ุงูููุฏ:**

```javascript
// Auto-refresh every 60 seconds
let autoRefreshInterval;
let autoRefreshEnabled = true;
let countdown = 60;

// Create visual indicator
const refreshIndicator = document.createElement('div');
refreshIndicator.innerHTML = `
    <i class="fas fa-sync-alt"></i>
    <span id="refreshCountdown">Auto-refresh: ON (60s)</span>
    <button id="toggleAutoRefresh">OFF</button>
`;

// Toggle function
toggleButton.addEventListener('click', function() {
    autoRefreshEnabled = !autoRefreshEnabled;
    if (autoRefreshEnabled) {
        startAutoRefresh();
    } else {
        clearInterval(autoRefreshInterval);
    }
});

// Countdown timer
setInterval(function() {
    if (autoRefreshEnabled) {
        countdown--;
        if (countdown <= 0) {
            location.reload();
        }
    }
}, 1000);
```

---

## ๐ **ุงูุฃุฏุงุก:**

- **ุงุณุชููุงู ุงูููุงุฑุฏ:** ููุฎูุถ ุฌุฏุงู
- **ุชุฃุซูุฑ ุนูู ุงูุณูุฑูุฑ:** ุทูุจ ูุงุญุฏ ูู 60 ุซุงููุฉ
- **ุชุฃุซูุฑ ุนูู ุงููุณุชุฎุฏู:** ูุง ููุฌุฏ (ุงูุชุญุฏูุซ ุณูุณ)

---

## โ๏ธ **ุงูุชุฎุตูุต:**

### **ูุชุบููุฑ ูุฏุฉ Auto-refresh:**

ูู `System/templates/admin/agents.html`:

```javascript
// ุบูุฑ 60 ุฅูู ุงููุฏุฉ ุงููุทููุจุฉ (ุจุงูุซูุงูู)
let countdown = 60;  // โ ุบูุฑ ููุง
```

### **ูุชุบููุฑ ูููุน ุงููุคุดุฑ:**

```javascript
refreshIndicator.style.cssText = `
    position: fixed;
    top: 70px;      // โ ุงููุณุงูุฉ ูู ุงูุฃุนูู
    left: 20px;     // โ ุงููุณุงูุฉ ูู ุงููุณุงุฑ (ุฃู right ููุฌูุฉ ุงููููู)
    ...
`;
```

### **ูุชุบููุฑ ุงูููู:**

```javascript
// ุนูุฏ ุงูุชูุนูู
refreshIndicator.style.background = '#28a745';  // ุฃุฎุถุฑ

// ุนูุฏ ุงูุชุนุทูู
refreshIndicator.style.background = '#6c757d';  // ุฑูุงุฏู
```

---

## ๐งช **ุงูุงุฎุชุจุงุฑ:**

### **Test Case 1: Auto-refresh ูุนูู**
```
1. ุงูุชุญ ุตูุญุฉ Agents
2. ุงูุชุธุฑ 60 ุซุงููุฉ
โ ุงููุชูุฌุฉ: ุงูุตูุญุฉ ุชุชุญุฏุซ ุชููุงุฆูุงู
```

### **Test Case 2: ุงูุนุฏ ุงูุชูุงุฒูู ุตุญูุญ**
```
1. ุงูุชุญ ุตูุญุฉ Agents
2. ุฑุงูุจ ุงูุนุฏ ุงูุชูุงุฒูู
โ ุงููุชูุฌุฉ: ูููุต ูู ุซุงููุฉ (60, 59, 58, ...)
```

### **Test Case 3: ุฒุฑ OFF ูุนูู**
```
1. ุงูุชุญ ุตูุญุฉ Agents
2. ุงุถุบุท "OFF"
3. ุงูุชุธุฑ 60 ุซุงููุฉ
โ ุงููุชูุฌุฉ: ุงูุตูุญุฉ ูุง ุชุชุญุฏุซ
```

### **Test Case 4: ุฒุฑ ON ูุนูู**
```
1. ุงูุชุญ ุตูุญุฉ Agents
2. ุงุถุบุท "OFF"
3. ุงุถุบุท "ON"
4. ุงูุชุธุฑ 60 ุซุงููุฉ
โ ุงููุชูุฌุฉ: ุงูุตูุญุฉ ุชุชุญุฏุซ
```

---

## ๐ **ููุงุญุธุงุช:**

1. โ Auto-refresh **ููุนูู ุงูุชุฑุงุถูุงู** ุนูุฏ ูุชุญ ุงูุตูุญุฉ
2. โ ุงูุฅุนุฏุงุฏ **ูุง ููุญูุธ** ุจุนุฏ ุฅุบูุงู ุงูุตูุญุฉ (ูุนูุฏ ููุงูุชุฑุงุถู)
3. โ ูููู ุชุนุทููู ูุคูุชุงู ุนูุฏ ุชุนุฏูู ุงูุจูุงูุงุช
4. โ๏ธ ุฅุฐุง ูุงู ููุงู modal ููุชูุญุ ุณููุบูู ุนูุฏ ุงูุชุญุฏูุซ

---

## ๐ฏ **ุงูุงุณุชุฎุฏุงูุงุช:**

### **ูุซุงูู ูู:**
- โ ูุฑุงูุจุฉ ุญุงูุฉ ุงูููุธููู ูู ุงูููุช ุงููุนูู
- โ ูุชุงุจุนุฉ ุงูุชุฐุงูุฑ ุงููุดุทุฉ
- โ Dashboard ูููุฏูุฑูู
- โ ุบุฑู ุงูุนูููุงุช (Control Rooms)

### **ุบูุฑ ููุงุณุจ ูู:**
- โ ุชุนุฏูู ุจูุงูุงุช ุงูููุธููู (ุนุทููู ูุคูุชุงู)
- โ ููุก ููุงุฐุฌ ุทูููุฉ
- โ ูุฑุงุกุฉ ุชูุงุตูู ูุนููุฉ

---

## ๐ฎ **ุชุญุณููุงุช ูุณุชูุจููุฉ (ุงุฎุชูุงุฑู):**

1. ุญูุธ ุงูุฅุนุฏุงุฏ ูู localStorage
2. ุฅุถุงูุฉ ุฎูุงุฑุงุช ูุฏุฉ ูุฎุชููุฉ (30s, 60s, 120s)
3. ุฅููุงู Auto-refresh ุชููุงุฆูุงู ุนูุฏ ูุชุญ Modal
4. ุฅุถุงูุฉ ุตูุช ุชูุจูู ุนูุฏ ุงูุชุญุฏูุซ
5. ุนุฑุถ ุขุฎุฑ ููุช ุชุญุฏูุซ

---

**ุชู ุจูุฌุงุญ! ๐**

ุงูุตูุญุฉ ุงูุขู ุชุชุญุฏุซ ุชููุงุฆูุงู ูู 60 ุซุงููุฉ ูุน ุฅููุงููุฉ ุงูุชุญูู ุงููุงูู.
