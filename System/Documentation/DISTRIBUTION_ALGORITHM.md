# ๐ฏ ุฎูุงุฑุฒููุฉ ุชูุฒูุน ุงูุนููุงุก - Least Loaded Algorithm

## ๐ ููู ูุนูู ุงููุธุงูุ

---

## ๐ **ุงูุณููุงุฑูู ุงููุงูู:**

### 1๏ธโฃ **ุนููู ุฌุฏูุฏ ูุจุนุช ุฑุณุงูุฉ**
```
๐ฑ ุนููู ุฌุฏูุฏ: "ูุฑุญุจุงู"
      โ
๐ ุงููุธุงู ูุจุญุซ ุนู ููุธู ูุชุงุญ
```

---

### 2๏ธโฃ **ุงูุดุฑูุท ุงููุทููุจุฉ ูู ุงูููุธู:**

```python
โ is_online = True          # ุงูููุธู Online
โ status = 'available'      # ุงูุญุงูุฉ: ูุชุงุญ
โ is_on_break = False       # ูุด ูู ุงุณุชุฑุงุญุฉ
โ current_active_tickets < max_capacity  # ุนูุฏู ููุงู
```

---

### 3๏ธโฃ **ุงูุชุฑุชูุจ ุญุณุจ ุงูุญูู:**

ุงููุธุงู ุจูุฑุชุจ ุงูููุธููู ูู **ุงูุฃูู ุญููุงู** ููุฃูุซุฑ:

```
order_by('current_active_tickets')  # ุชุฑุชูุจ ุชุตุงุนุฏู
```

---

## ๐ **ูุซุงู ุนููู:**

### ุงูููุธููู ุงููุชุงุญูู:

| ุงูููุธู | Online | ุงูุญุงูุฉ | ูู ุงุณุชุฑุงุญุฉุ | ุงูุชุฐุงูุฑ ุงููุดุทุฉ | ุงูุณุนุฉ ุงููุตูู | ุงููุชูุฌุฉ |
|--------|--------|--------|-------------|----------------|--------------|---------|
| ุฃุญูุฏ | โ | available | โ | **2** | 15 | โ **ูุชู ุงุฎุชูุงุฑู** |
| ูุญูุฏ | โ | available | โ | 5 | 15 | โณ ุงุญุชูุงุทู |
| ุนูู | โ | available | โ | 8 | 15 | โณ ุงุญุชูุงุทู |
| ุณุงุฑุฉ | โ | available | โ | 3 | 15 | โ ูู ุงุณุชุฑุงุญุฉ |
| ูุงุทูุฉ | โ | busy | โ | 15 | 15 | โ ููุชูุฆุฉ |
| ุฎุงูุฏ | โ | offline | โ | 0 | 15 | โ Offline |

**ุงููุชูุฌุฉ:** ุงูุนููู ุงูุฌุฏูุฏ โ **ุฃุญูุฏ** (ุงูุฃูู ุญููุงู)

---

## ๐ป **ุงูููุฏ ุงููุนูู:**

```python
def get_available_agent():
    """
    ุงูุญุตูู ุนูู ููุธู ูุชุงุญ ุจุงุณุชุฎุฏุงู ุฎูุงุฑุฒููุฉ Least Loaded
    """
    from .models import Agent
    from django.db.models import F

    # ุงูุจุญุซ ุนู ููุธู ูุชุงุญ
    available_agents = Agent.objects.filter(
        is_online=True,              # โ Online
        status='available',          # โ ูุชุงุญ
        is_on_break=False,          # โ ูุด ูู ุงุณุชุฑุงุญุฉ
        current_active_tickets__lt=F('max_capacity')  # โ ุนูุฏู ููุงู
    ).order_by('current_active_tickets')  # ุชุฑุชูุจ ูู ุงูุฃูู ููุฃูุซุฑ

    if available_agents.exists():
        return available_agents.first()  # ุงุฎุชูุงุฑ ุงูุฃูู (ุงูุฃูู ุญููุงู)

    return None  # ูุง ููุฌุฏ ููุธู ูุชุงุญ
```

---

## ๐ **ุจุนุฏ ุงูุชุนููู:**

```python
def assign_ticket_to_agent(ticket, agent):
    """
    ุชุนููู ุชุฐูุฑุฉ ูููุธู
    """
    # 1. ุชุนููู ุงูุชุฐูุฑุฉ
    ticket.assigned_agent = agent
    ticket.current_agent = agent
    ticket.save()
    
    # 2. ุฒูุงุฏุฉ ุนุฏุฏ ุงูุชุฐุงูุฑ ุงููุดุทุฉ
    agent.current_active_tickets += 1
    
    # 3. ุชุญุฏูุซ ุญุงูุฉ ุงูููุธู ุชููุงุฆูุงู
    if agent.current_active_tickets >= agent.max_capacity:
        agent.status = 'busy'  # ููุชูุฆ
    
    agent.save()
```

---

## ๐ **ูุซุงู ุนูู ุงูุชูุฒูุน:**

### ูุจู ุงุณุชูุจุงู ุนููุงุก ุฌุฏุฏ:
```
ุฃุญูุฏ:  โโโโโโโโโโโโโโโ  2/15
ูุญูุฏ:  โโโโโโโโโโโโโโโ  5/15
ุนูู:   โโโโโโโโโโโโโโโ  8/15
```

### ุจุนุฏ ุงุณุชูุจุงู 3 ุนููุงุก ุฌุฏุฏ:
```
ุนููู 1 โ ุฃุญูุฏ (ูุงู 2ุ ุฃุตุจุญ 3)
ุนููู 2 โ ุฃุญูุฏ (ูุงู 3ุ ุฃุตุจุญ 4)
ุนููู 3 โ ุฃุญูุฏ (ูุงู 4ุ ุฃุตุจุญ 5)

ุงููุชูุฌุฉ:
ุฃุญูุฏ:  โโโโโโโโโโโโโโโ  5/15  โ ุงุณุชูุจู 3 ุนููุงุก
ูุญูุฏ:  โโโโโโโโโโโโโโโ  5/15
ุนูู:   โโโโโโโโโโโโโโโ  8/15
```

### ุจุนุฏ ุงุณุชูุจุงู ุนููู ุฑุงุจุน:
```
ุนููู 4 โ ุฃุญูุฏ ุฃู ูุญูุฏ (ููุงููุง 5)
ุงููุธุงู ูุฎุชุงุฑ ุงูุฃูู ูู ุงูุชุฑุชูุจ (ุญุณุจ ID ุฃู ุชุงุฑูุฎ ุงูุฅูุดุงุก)
```

---

## ๐ฏ **ุงูุญุงูุงุช ุงูุฎุงุตุฉ:**

### 1๏ธโฃ **ูุง ููุฌุฏ ููุธู ูุชุงุญ:**
```python
if not available_agent:
    # TODO: ุฅุถุงูุฉ ุฅูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ
    return None
```

**ุงููุชูุฌุฉ:** ุงูุชุฐูุฑุฉ ุชุจูู ุจุฏูู ููุธู (status = 'pending')

---

### 2๏ธโฃ **ููุธู ูุฃุฎุฐ ุงุณุชุฑุงุญุฉ:**
```python
agent.is_on_break = True
agent.status = 'on_break'
agent.save()
```

**ุงููุชูุฌุฉ:** 
- โ ูู ูุณุชูุจู ุชุฐุงูุฑ ุฌุฏูุฏุฉ
- โ ุงูุชุฐุงูุฑ ุงูุญุงููุฉ ุชุจูู ูุนู
- โ ููููู ุงูุฑุฏ ุนูู ุงูุชุฐุงูุฑ ุงูุญุงููุฉ

---

### 3๏ธโฃ **ููุธู ูุณุฌู ุฎุฑูุฌ:**
```python
agent.is_online = False
agent.status = 'offline'
agent.save()
```

**ุงููุชูุฌุฉ:**
- โ ูู ูุณุชูุจู ุชุฐุงูุฑ ุฌุฏูุฏุฉ
- โ ุงูุชุฐุงูุฑ ุงููุดุทุฉ ูุชู **ุฅุนุงุฏุฉ ุชูุฒูุนูุง** ุชููุงุฆูุงู ุนูู ููุธููู ุขุฎุฑูู

---

### 4๏ธโฃ **ููุธู ูุตู ููุณุนุฉ ุงููุตูู:**
```python
if agent.current_active_tickets >= agent.max_capacity:
    agent.status = 'busy'
```

**ุงููุชูุฌุฉ:**
- โ ูู ูุณุชูุจู ุชุฐุงูุฑ ุฌุฏูุฏุฉ
- โ ููููู ุฅููุงุก ุงูุชุฐุงูุฑ ุงูุญุงููุฉ
- โ ุนูุฏ ุฅุบูุงู ุชุฐูุฑุฉุ ุงูุญุงูุฉ ุชุฑุฌุน 'available' ุชููุงุฆูุงู

---

## ๐ **ูุฑุงูุจุฉ ุงูุชูุฒูุน:**

### ูู ุตูุญุฉ Admin Dashboard:
```
http://127.0.0.1:8888/admin/dashboard/
```

**ุชุดููู:**
- ุนุฏุฏ ุงูุชุฐุงูุฑ ููู ููุธู
- ุงูููุธููู ุงููุชุงุญูู
- ุงูููุธููู ุงููุดุบูููู
- ุงูููุธููู Offline

---

### ูู ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูููุธููู:
```
http://127.0.0.1:8888/admin/agents/
```

**ุชุดููู:**
- ุงูุชุฐุงูุฑ ุงููุดุทุฉ ููู ููุธู
- ุงูุณุนุฉ ุงููุตูู
- ุงูุญุงูุฉ (available/busy/offline/on_break)

---

## ๐ฏ **ูููุฒุงุช ุงูุฎูุงุฑุฒููุฉ:**

### โ **ุงููููุฒุงุช:**
1. โ **ุชูุฒูุน ุนุงุฏู** - ูู ููุธู ูุงุฎุฏ ููุณ ุงูุนุฏุฏ ุชูุฑูุจุงู
2. โ **ุชููุงุฆู ุจุงููุงูู** - ูุง ูุญุชุงุฌ ุชุฏุฎู ูุฏูู
3. โ **ุฏููุงูููู** - ูุชููู ูุน ุชุบูุฑ ุงูุฃุญูุงู
4. โ **ูุญุชุฑู ุงูุณุนุฉ ุงููุตูู** - ูุง ูุญููู ููุธู ุฃูุซุฑ ูู ุทุงูุชู
5. โ **ูุณุชุจุนุฏ ุงูููุธููู ูู ุงุณุชุฑุงุญุฉ** - ูุง ูุฒุนุฌูู

### โ๏ธ **ุงููููุฏ:**
1. โ๏ธ ูุง ูุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ **ุชุฎุตุต ุงูููุธู** (ูู ุงูููุธููู ูุชุณุงููู)
2. โ๏ธ ูุง ูุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ **ุชุนููุฏ ุงูุชุฐูุฑุฉ** (ูู ุงูุชุฐุงูุฑ ูุชุณุงููุฉ)
3. โ๏ธ ูุง ูุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ **ุฃุฏุงุก ุงูููุธู** (ุงูุณุฑุนุฉ/ุงูุฌูุฏุฉ)

---

## ๐ฎ **ุชุญุณููุงุช ูุณุชูุจููุฉ:**

### 1๏ธโฃ **ุชูุฒูุน ุญุณุจ ุงูุชุฎุตุต:**
```python
# ูุซุงู: ููุธููู ูุชุฎุตุตูู ูู ุงูุฃุฏููุฉ
if ticket.category == 'medicine_order':
    agent = get_medicine_specialist()
```

### 2๏ธโฃ **ุชูุฒูุน ุญุณุจ ุงูุฃููููุฉ:**
```python
# ูุซุงู: ุงูุชุฐุงูุฑ ุงูุนุงุฌูุฉ ููููุธููู ุงูุฃุณุฑุน
if ticket.priority == 'urgent':
    agent = get_fastest_agent()
```

### 3๏ธโฃ **ุชูุฒูุน ุญุณุจ ุงููุบุฉ:**
```python
# ูุซุงู: ุนููุงุก ุฅูุฌููุฒู ูููุธููู ูุชุญุฏุซูู ุฅูุฌููุฒู
if customer.language == 'en':
    agent = get_english_speaking_agent()
```

---

## ๐ **ุงูุฎูุงุตุฉ:**

ุงููุธุงู ูุณุชุฎุฏู **Least Loaded Algorithm** - ุฎูุงุฑุฒููุฉ ุจุณูุทุฉ ููุนุงูุฉ:

```
ุนููู ุฌุฏูุฏ โ ุงุจุญุซ ุนู ููุธู ูุชุงุญ โ ุงุฎุชุฑ ุงูุฃูู ุญููุงู โ ุนููู ุงูุชุฐูุฑุฉ
```

**ุงููุชูุฌุฉ:** ุชูุฒูุน ุนุงุฏู ููุชูุงุฒู ุจูู ุฌููุน ุงูููุธููู! โ๏ธ

---

**ุชู ุฅุนุฏุงุฏ ุงูุดุฑุญ ุจูุงุณุทุฉ:** Kiro AI Assistant  
**ุงูุชุงุฑูุฎ:** 12 ููููุจุฑ 2025
